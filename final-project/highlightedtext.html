<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <p>
      Serata di gala che assegna il massimo riconoscimento della Fifa. Se lo aggiudica il fuoriclasse argentino, che piega la concorrenza di Cristiano Ronaldo e Neymar: "Oltre i sogni di quando ero bambino". Il premio Puskas a sorpresa va al brasiliano Lira, che piega le aspirazioni del giocatore della Roma. Premio femminile alla statunitense Lloyd, Luis Enrique miglior allenatore, Pogba nel top 11
    </p>
    <p>
      Serata di gala che assegna il massimo riconoscimento della Fifa. Se lo aggiudica il fuoriclasse argentino, che piega la concorrenza di Cristiano Ronaldo e Neymar: "Oltre i sogni di quando ero bambino". Il premio Puskas a sorpresa va al brasiliano Lira, che piega le aspirazioni del giocatore della Roma. Premio femminile alla statunitense Lloyd, Luis Enrique miglior allenatore, Pogba nel top 11
    </p>
    <div id="translation">

    </div>

    <script>

    var sourceText;
    var $sourceLang = "it";
    var $targetLang = "en";
    var newScript = document.createElement('script');
    newScript.type = 'text/javascript';

    function receiveMouseUp() {
      sourceText = getSelectedText();
      if (sourceText) {
        console.log(sourceText);
        translateText();
    }
    }


    function getSelectedText() {
        var text = "";
        if (window.getSelection) {
            text = window.getSelection().toString();
        } else if (document.selection && document.selection.type != "Control") {
            text = document.selection.createRange().text;
        }
        return text;
    }



    function translateText(response) {

        var source = 'https://www.googleapis.com/language/translate/v2?key=AIzaSyDuXAgBhZVhF75wlVv4pprIUIbFgdzGB4Q&source=' + $sourceLang + '&target=' + $targetLang + '&callback=translateText&q=' + sourceText;
        newScript.src = source;
        document.getElementsByTagName('head')[0].appendChild(newScript);
        document.getElementById("translation").innerHTML += response.data.translations[0].translatedText;
        console.log(response);
    };

    document.addEventListener("mouseup", receiveMouseUp);



    </script>

  </body>
</html>
